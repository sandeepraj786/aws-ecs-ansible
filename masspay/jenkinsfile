pipeline{
    agent any
        stages{
            stage('SCM Checkout'){
                steps{
                    git 'https://github.com/sandeepraj786/aws-ecs-ansible.git'
                }
            }
            stage('passing the parameter'){
                steps{
                    script{
                        properties([
                            parameters([
                                string(name: 'action', defaultValue: "present", description: 'Resource provisioning and Resources deprovisioning '),
                            ])
                        ])
                    }
                }
            }
            stage('Resource provisioning'){
                steps{
                    script{
                    sh " ansible-playbook ecs-ansible-project/masspay/Provision_ecs.yml --extra-vars 'state=${action}'"
                    sh " ansible-playbook ecs-ansible-project/masspay/deploy_ecs.yml --extra-vars 'state=${action}'"
                    }
                }
            }
        }
    
}